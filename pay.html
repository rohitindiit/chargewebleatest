<!DOCTYPE html>
<html>
<head>
    <title>Sample form</title>
</head>

<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript"
    src="https://js.authorize.net/v3/AcceptUI.js"
    charset="utf-8">
</script>

<form id="paymentForm"
    method="POST"
    action="#">
    <input type="hidden" name="dataValue" id="dataValue" />
    <input type="hidden" name="dataDescriptor" id="dataDescriptor" />
    <button type="button"
        class="AcceptUI"
        data-billingAddressOptions='{"show":true, "required":false}' 
        data-apiLoginID="5cvF8qM8YX" 
        data-clientKey="86ms2z9Xypf9s9866Ag8WA8J6Rec9UKvpV34Kdvdw9p6596z9Vaakjy2sqYYHJQG"
        data-acceptUIFormBtnTxt="Submit" 
        data-acceptUIFormHeaderTxt="Card Information" 
        data-responseHandler="responseHandler">Pay
    </button>
</form>

<script type="text/javascript">

function responseHandler(response) {
    if (response.messages.resultCode === "Error") {
        var i = 0;
        while (i < response.messages.message.length) {
            console.log(
                response.messages.message[i].code + ": " +
                response.messages.message[i].text
            );
            i = i + 1;
        }
    } else {
        paymentFormUpdate(response.opaqueData);
    }
}


function paymentFormUpdate(opaqueData) {
    document.getElementById("dataDescriptor").value = opaqueData.dataDescriptor;
    document.getElementById("dataValue").value = opaqueData.dataValue;

    // If using your own form to collect the sensitive data from the customer,
    // blank out the fields before submitting them to your server.
    // document.getElementById("cardNumber").value = "";
    // document.getElementById("expMonth").value = "";
    // document.getElementById("expYear").value = "";
    // document.getElementById("cardCode").value = "";

    document.getElementById("paymentForm").submit();
}

$(document).ready(function(){

//     const urlSearchParams = new URLSearchParams(window.location.search);
// const amount = urlSearchParams.get("amount");
// const stationId = urlSearchParams.get("stationId");
// const checkInId = urlSearchParams.get("checkInId");
// const token = urlSearchParams.get("token");

//     const newAction = `https://api.chargeasy.org:3001/receivePaymentToken?amount=${amount}&stationId=${stationId}&checkInId=${checkInId}&token=${token}`;
//     $("#paymentForms").attr('action',newAction);

//     alert( $("#paymentForms").attr('action'));

    if ($('#paymentForms').length)
{
 alert('dd');
}
else
{
    alert('pp');
}
    
});
</script>

</body>
</html>